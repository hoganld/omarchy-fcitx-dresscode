#!/bin/bash

THEME_NAME="$1"
FCITX_THEMES_ROOT="$HOME/.local/share/fcitx5/themes"

# If a matching fcitx5 theme exists, use it
# Otherwise, set the default fcitx5 theme
if [[ ! -d "$FCITX_THEMES_ROOT/$THEME_NAME" ]]; then
  THEME_NAME="fallback"
fi

# This gem comes from this GitHub discussion
# https://github.com/fcitx/fcitx5/issues/900#issuecomment-1913679787
gdbus call --session --dest org.fcitx.Fcitx5 --object-path /controller --method org.fcitx.Fcitx.Controller1.SetConfig fcitx://config/addon/classicui "<{'Theme': <'$THEME_NAME'>}>"
